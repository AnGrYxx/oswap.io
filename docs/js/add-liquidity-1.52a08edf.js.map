{"version":3,"sources":["webpack:///./src/views/AddLiquidity1.vue?b217","webpack:///src/views/AddLiquidity1.vue","webpack:///./src/views/AddLiquidity1.vue?b9b7","webpack:///./src/views/AddLiquidity1.vue","webpack:///./src/helpers/_oswap/pair.ts","webpack:///./node_modules/core-js/modules/es.parse-int.js","webpack:///./node_modules/core-js/internals/parse-int.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","handleSubmit","staticClass","_v","attrs","model","value","callback","$$v","id","expression","pair","reserve0","asset0","reserve1","asset1","_e","setAmount0","updateAmount1","amount0","setAmount1","updateAmount0","amount1","staticRenderFns","data","watch","methods","amount","hasLiquidity","k","toFixed","texto","msg","body","pairing_secret","requestId","reply","message","location","href","component","Pair","address","assets","ready","info","parseInt","supply","inputAmount","inputAsset","inputReserve","outputReserve","outputAmount","outputAsset","$","parseIntImplementation","global","forced","trim","whitespaces","nativeParseInt","hex","FORCED","module","exports","string","radix","S","String","test"],"mappings":"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","file":"js/add-liquidity-1.52a08edf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"container-sm px-3\"},[_c('PoolNav'),_c('Box',[_c('label',{staticClass:\"d-block\"},[_vm._v(\"Pool\")]),_c('ButtonSelectPair',{attrs:{\"customClass\":\"h2 d-block\"},model:{value:(_vm.id),callback:function ($$v) {_vm.id=$$v},expression:\"id\"}}),(_vm.pair)?_c('div',[_c('label',{staticClass:\"d-block\"},[_vm._v(\" Current pool size \")]),_c('a',{attrs:{\"href\":(\"https://testnetexplorer.obyte.org/#\" + (_vm.pair.address)),\"target\":\"_blank\"}},[_c('Amount',{attrs:{\"value\":_vm.pair.reserve0,\"asset\":_vm.pair.asset0}}),_vm._v(\" \"),_c('Ticker',{attrs:{\"asset\":_vm.pair.asset0}}),_vm._v(\" + \"),_c('Amount',{attrs:{\"value\":_vm.pair.reserve1,\"asset\":_vm.pair.asset1}}),_vm._v(\" \"),_c('Ticker',{attrs:{\"asset\":_vm.pair.asset1}}),_c('Icon',{staticClass:\"ml-1\",attrs:{\"name\":\"external-link\",\"size\":\"18\"}})],1)]):_vm._e()],1),(_vm.pair.asset0)?[_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"amount0\"}},[_vm._v(\" Deposit \"),_c('LabelBalance',{attrs:{\"asset\":_vm.pair.asset0},on:{\"select\":_vm.setAmount0}})],1),_c('InputAmount',{attrs:{\"id\":\"amount0\",\"asset\":_vm.pair.asset0},on:{\"change\":_vm.updateAmount1},model:{value:(_vm.amount0),callback:function ($$v) {_vm.amount0=$$v},expression:\"amount0\"}})],1),_c('div',{staticClass:\"text-right mt-4 ml-4\"},[_c('Ticker',{staticClass:\"btn-mktg\",attrs:{\"asset\":_vm.pair.asset0}})],1)]),_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"amount1\"}},[_vm._v(\" Deposit \"),_c('LabelBalance',{attrs:{\"asset\":_vm.pair.asset1},on:{\"select\":_vm.setAmount1}})],1),_c('InputAmount',{attrs:{\"id\":\"amount1\",\"asset\":_vm.pair.asset1},on:{\"change\":_vm.updateAmount0},model:{value:(_vm.amount1),callback:function ($$v) {_vm.amount1=$$v},expression:\"amount1\"}})],1),_c('div',{staticClass:\"text-right mt-4 ml-4\"},[_c('Ticker',{staticClass:\"btn-mktg\",attrs:{\"asset\":_vm.pair.asset1}})],1)])]:_vm._e(),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn-submit px-6 rounded-2 mb-3\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.id || !_vm.amount0}},[_vm._v(\" Add liquidity \")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"container-sm px-3\">\n      <PoolNav />\n      <Box>\n        <label class=\"d-block\">Pool</label>\n        <ButtonSelectPair customClass=\"h2 d-block\" v-model=\"id\" />\n        <div v-if=\"pair\">\n          <label class=\"d-block\">\n            Current pool size\n          </label>\n          <a :href=\"`https://testnetexplorer.obyte.org/#${pair.address}`\" target=\"_blank\">\n            <Amount :value=\"pair.reserve0\" :asset=\"pair.asset0\" /> <Ticker :asset=\"pair.asset0\" /> +\n            <Amount :value=\"pair.reserve1\" :asset=\"pair.asset1\" /> <Ticker :asset=\"pair.asset1\" />\n            <Icon name=\"external-link\" class=\"ml-1\" size=\"18\" />\n          </a>\n        </div>\n      </Box>\n      <template v-if=\"pair.asset0\">\n        <Box class=\"d-flex\">\n          <div class=\"flex-auto\">\n            <label for=\"amount0\" class=\"d-block\">\n              Deposit\n              <LabelBalance :asset=\"pair.asset0\" @select=\"setAmount0\" />\n            </label>\n            <InputAmount\n              id=\"amount0\"\n              v-model=\"amount0\"\n              :asset=\"pair.asset0\"\n              @change=\"updateAmount1\"\n            />\n          </div>\n          <div class=\"text-right mt-4 ml-4\">\n            <Ticker class=\"btn-mktg\" :asset=\"pair.asset0\" />\n          </div>\n        </Box>\n        <Box class=\"d-flex\">\n          <div class=\"flex-auto\">\n            <label for=\"amount1\" class=\"d-block\">\n              Deposit\n              <LabelBalance :asset=\"pair.asset1\" @select=\"setAmount1\" />\n            </label>\n            <InputAmount\n              id=\"amount1\"\n              v-model=\"amount1\"\n              :asset=\"pair.asset1\"\n              @change=\"updateAmount0\"\n            />\n          </div>\n          <div class=\"text-right mt-4 ml-4\">\n            <Ticker class=\"btn-mktg\" :asset=\"pair.asset1\" />\n          </div>\n        </Box>\n      </template>\n      <div class=\"text-center\">\n        <button class=\"btn-submit px-6 rounded-2 mb-3\" type=\"submit\" :disabled=\"!id || !amount0\">\n          Add liquidity\n        </button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport { randomBytes } from 'crypto';\nimport texto from '@/helpers/texto';\nimport Pair from '@/helpers/_oswap/pair';\nimport { generatePaymentMessage } from '@/helpers/_oswap';\nimport { shorten } from '@/helpers/utils';\n\nexport default {\n  data() {\n    return {\n      id: false,\n      pair: false,\n      amount0: '',\n      amount1: ''\n    };\n  },\n  watch: {\n    async id(value, oldValue) {\n      if (value !== oldValue) {\n        this.amount0 = '';\n        this.amount1 = '';\n        const address = this.$store.state.settings.allPairs[value];\n        const pair = new Pair(address, value.split('_'));\n        await pair.init();\n        this.pair = pair;\n      }\n    }\n  },\n  methods: {\n    setAmount0(amount) {\n      this.amount0 = amount;\n      this.updateAmount1();\n    },\n    setAmount1(amount) {\n      this.amount1 = amount;\n      this.updateAmount0();\n    },\n    updateAmount0() {\n      if (!this.amount1 || !this.pair || !this.pair.hasLiquidity()) return;\n      const k = this.pair.reserve0 / this.pair.reserve1;\n      this.amount0 = (k * this.amount1).toFixed();\n    },\n    updateAmount1() {\n      if (!this.amount0 || !this.pair || !this.pair.hasLiquidity()) return;\n      const k = this.pair.reserve0 / this.pair.reserve1;\n      this.amount1 = (this.amount0 / k).toFixed();\n    },\n    handleSubmit() {\n      const assets = this.$store.state.settings.assets;\n      const address = this.pair.address;\n      const payments = [\n        { address, amount: parseInt(this.amount0), asset: this.pair.asset0 },\n        { address, amount: parseInt(this.amount1), asset: this.pair.asset1 }\n      ];\n      if (this.pair.asset0 !== 'base' && this.pair.asset1 !== 'base')\n        payments.push({ address, amount: 1e4 });\n      const paymentJsonBase64 = generatePaymentMessage({ payments });\n      const asset0Str = assets[this.pair.asset0].symbol || shorten(this.pair.asset0);\n      const asset1Str = assets[this.pair.asset1].symbol || shorten(this.pair.asset1);\n      const pair = `${asset0Str}-${asset1Str}`;\n      const message = `Add liquidity ${pair}\\n[add-liquidity](payment:${paymentJsonBase64})`;\n      const requestId = randomBytes(32).toString('base64');\n      texto.on('pairing', msg => {\n        if (msg.body.pairing_secret === requestId) msg.reply(message);\n      });\n      location.href = `${this.$store.state.auth.invite}#${requestId}`;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLiquidity1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLiquidity1.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddLiquidity1.vue?vue&type=template&id=1d3cf5e4&\"\nimport script from \"./AddLiquidity1.vue?vue&type=script&lang=js&\"\nexport * from \"./AddLiquidity1.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { getInfo, getAmountBought, getAmountSold } from './';\n\nexport default class Pair {\n  public ready: boolean = false;\n  public address: string;\n  public asset0: string;\n  public asset1: string;\n  public reserve0?: number;\n  public reserve1?: number;\n  public supply?: number;\n\n  constructor(address, assets) {\n    this.asset0 = assets[0];\n    this.asset1 = assets[1];\n    this.address = address;\n  }\n\n  async init() {\n    const info = await getInfo(this.address);\n    this.reserve0 = parseInt(info.reserve0);\n    this.reserve1 = parseInt(info.reserve1);\n    this.supply = parseInt(info.supply);\n    this.ready = true;\n  }\n\n  hasLiquidity() {\n    return !(!this.reserve0 || !this.reserve1 || !this.supply);\n  }\n\n  getAmountBought(inputAmount, inputAsset) {\n    const inputReserve = inputAsset === this.asset0 ? this.reserve0 : this.reserve1;\n    const outputReserve = inputAsset === this.asset1 ? this.reserve0 : this.reserve1;\n    return getAmountBought(inputAmount, inputReserve, outputReserve);\n  }\n\n  getAmountSold(outputAmount, outputAsset) {\n    const inputReserve = outputAsset === this.asset1 ? this.reserve0 : this.reserve1;\n    const outputReserve = outputAsset === this.asset0 ? this.reserve0 : this.reserve1;\n    return getAmountSold(outputAmount, outputReserve, inputReserve);\n  }\n}\n","var $ = require('../internals/export');\nvar parseIntImplementation = require('../internals/parse-int');\n\n// `parseInt` method\n// https://tc39.github.io/ecma262/#sec-parseint-string-radix\n$({ global: true, forced: parseInt != parseIntImplementation }, {\n  parseInt: parseIntImplementation\n});\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar nativeParseInt = global.parseInt;\nvar hex = /^[+-]?0[Xx]/;\nvar FORCED = nativeParseInt(whitespaces + '08') !== 8 || nativeParseInt(whitespaces + '0x16') !== 22;\n\n// `parseInt` method\n// https://tc39.github.io/ecma262/#sec-parseint-string-radix\nmodule.exports = FORCED ? function parseInt(string, radix) {\n  var S = trim(String(string));\n  return nativeParseInt(S, (radix >>> 0) || (hex.test(S) ? 16 : 10));\n} : nativeParseInt;\n"],"sourceRoot":""}