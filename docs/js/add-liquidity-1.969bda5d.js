(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["add-liquidity-1"],{b91f:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("form",{on:{submit:function(s){return s.preventDefault(),t.handleSubmit(s)}}},[e("div",{staticClass:"container-sm px-3"},[e("PoolNav"),e("Box",[e("label",{staticClass:"d-block"},[t._v("Pool")]),e("ButtonSelectPair",{attrs:{customClass:"h2 d-block"},model:{value:t.id,callback:function(s){t.id=s},expression:"id"}}),t.pair?e("div",[e("label",{staticClass:"d-block"},[t._v("Current pool size")]),e("a",{attrs:{href:"https://testnetexplorer.obyte.org/#"+t.pair.address,target:"_blank"}},[e("Amount",{attrs:{value:t.pair.reserve0,asset:t.pair.asset0}}),t._v(" "),e("Ticker",{attrs:{asset:t.pair.asset0}}),t._v(" + "),e("Amount",{attrs:{value:t.pair.reserve1,asset:t.pair.asset1}}),t._v(" "),e("Ticker",{attrs:{asset:t.pair.asset1}}),e("Icon",{staticClass:"ml-1",attrs:{name:"external-link",size:"18"}})],1)]):t._e(),t.share?e("div",[e("label",{staticClass:"d-block"},[t._v("Your pool share")]),e("span",{staticClass:"text-white"},[t.share>1?e("Pie",{staticClass:"mr-2",attrs:{percent:t.share}}):t._e(),t._v(" "+t._s(t.share)+"% ")],1)]):t._e()],1),t.pair.asset0?[e("Box",{staticClass:"d-flex"},[e("div",{staticClass:"flex-auto"},[e("label",{staticClass:"d-block",attrs:{for:"amount0"}},[t._v(" Deposit "),e("LabelBalance",{attrs:{asset:t.pair.asset0},on:{select:t.setAmount0}})],1),e("InputAmount",{attrs:{id:"amount0",asset:t.pair.asset0},on:{change:t.updateAmount1},model:{value:t.amount0,callback:function(s){t.amount0=s},expression:"amount0"}})],1),e("div",{staticClass:"text-right mt-4 ml-4"},[e("Ticker",{staticClass:"btn-mktg",attrs:{asset:t.pair.asset0}})],1)]),e("Box",{staticClass:"d-flex"},[e("div",{staticClass:"flex-auto"},[e("label",{staticClass:"d-block",attrs:{for:"amount1"}},[t._v(" Deposit "),e("LabelBalance",{attrs:{asset:t.pair.asset1},on:{select:t.setAmount1}})],1),e("InputAmount",{attrs:{id:"amount1",asset:t.pair.asset1},on:{change:t.updateAmount0},model:{value:t.amount1,callback:function(s){t.amount1=s},expression:"amount1"}})],1),e("div",{staticClass:"text-right mt-4 ml-4"},[e("Ticker",{staticClass:"btn-mktg",attrs:{asset:t.pair.asset1}})],1)])]:t._e(),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn-submit px-6 rounded-2 mb-3",attrs:{type:"submit",disabled:!t.id||!t.amount0}},[t._v(" Add liquidity ")])])],2)])},i=[],r=(e("99af"),e("b680"),e("d3b7"),e("acd8"),e("e25e"),e("ac1f"),e("25f0"),e("1276"),e("96cf"),e("1da1")),n=e("1c46"),o=e("a4b1"),u=e("db87"),c=e("90a9"),l=e("eb59"),h={data:function(){return{id:!1,pair:!1,amount0:"",amount1:"",share:0}},watch:{id:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(s,e){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s===e){t.next=10;break}return this.amount0="",this.amount1="",a=this.$store.state.settings.allPairs[s],i=new u["a"](a,s.split("_")),t.next=7,i.init();case 7:r=Object(c["k"])(this.$store.state.auth.balances,i.asset),this.share=parseFloat((100/i.supply*r).toFixed(3)),this.pair=i;case 10:case"end":return t.stop()}}),t,this)})));function s(s,e){return t.apply(this,arguments)}return s}()},methods:{setAmount0:function(t){this.amount0=t,this.updateAmount1()},setAmount1:function(t){this.amount1=t,this.updateAmount0()},updateAmount0:function(){if(this.amount1&&this.pair&&this.pair.hasLiquidity()){var t=this.pair.reserve0/this.pair.reserve1;this.amount0=(t*this.amount1).toFixed()}},updateAmount1:function(){if(this.amount0&&this.pair&&this.pair.hasLiquidity()){var t=this.pair.reserve0/this.pair.reserve1;this.amount1=(this.amount0/t).toFixed()}},handleSubmit:function(){var t=this.$store.state.settings.assets,s=this.pair.address,e=[{address:s,amount:parseInt(this.amount0),asset:this.pair.asset0},{address:s,amount:parseInt(this.amount1),asset:this.pair.asset1}];"base"!==this.pair.asset0&&"base"!==this.pair.asset1&&e.push({address:s,amount:1e4});var a=Object(c["f"])({payments:e}),i=t[this.pair.asset0].symbol||Object(l["c"])(this.pair.asset0),r=t[this.pair.asset1].symbol||Object(l["c"])(this.pair.asset1),u="".concat(i,"-").concat(r),h="Add liquidity ".concat(u,"\n[add-liquidity](payment:").concat(a,")"),p=Object(n["randomBytes"])(32).toString("base64");o["a"].on("pairing",(function(t){t.body.pairing_secret===p&&t.reply(h)})),location.href="".concat(this.$store.state.auth.invite,"#").concat(p)}}},p=h,d=e("2877"),m=Object(d["a"])(p,a,i,!1,null,null,null);s["default"]=m.exports},db87:function(t,s,e){"use strict";e.d(s,"a",(function(){return o}));e("e25e"),e("96cf");var a=e("1da1"),i=e("d4ec"),r=e("bee2"),n=e("90a9"),o=function(){function t(s,e){Object(i["a"])(this,t),this.ready=!1,this.asset0=e[0],this.asset1=e[1],this.address=s}return Object(r["a"])(t,[{key:"init",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["l"])(this.address);case 2:s=t.sent,this.asset=s.asset,this.reserve0=parseInt(s.reserve0),this.reserve1=parseInt(s.reserve1),this.supply=parseInt(s.supply),this.ready=!0;case 8:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}()},{key:"hasLiquidity",value:function(){return!(!this.reserve0||!this.reserve1||!this.supply)}},{key:"getAmountBought",value:function(t,s){var e=s===this.asset0?this.reserve0:this.reserve1,a=s===this.asset1?this.reserve0:this.reserve1;return Object(n["i"])(t,e,a)}},{key:"getAmountSold",value:function(t,s){var e=s===this.asset1?this.reserve0:this.reserve1,a=s===this.asset0?this.reserve0:this.reserve1;return Object(n["j"])(t,a,e)}}]),t}()}}]);
//# sourceMappingURL=add-liquidity-1.969bda5d.js.map