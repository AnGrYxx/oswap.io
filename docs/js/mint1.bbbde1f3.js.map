{"version":3,"sources":["webpack:///./src/views/Mint1.vue?1d71","webpack:///src/views/Mint1.vue","webpack:///./src/views/Mint1.vue?6f9d","webpack:///./src/views/Mint1.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","handleSubmit","staticClass","attrs","address","model","value","callback","$$v","pool","expression","_v","asset0","setAmount0","updateAmount1","amount0","asset1","setAmount1","updateAmount0","amount1","_e","staticRenderFns","data","$route","params","watch","methods","amount","hasLiquidity","k","toFixed","texto","msg","body","pairing_secret","requestId","reply","message","location","href","component"],"mappings":"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","file":"js/mint1.bbbde1f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"container-sm px-3\"},[_c('PoolNav'),_c('BoxSelectPool',{attrs:{\"address\":_vm.address},model:{value:(_vm.pool),callback:function ($$v) {_vm.pool=$$v},expression:\"pool\"}}),(_vm.pool.asset0)?[_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"amount0\"}},[_vm._v(\" Deposit \"),_c('LabelBalance',{attrs:{\"asset\":_vm.pool.asset0},on:{\"select\":_vm.setAmount0}})],1),_c('InputAmount',{attrs:{\"id\":\"amount0\",\"asset\":_vm.pool.asset0},on:{\"change\":_vm.updateAmount1},model:{value:(_vm.amount0),callback:function ($$v) {_vm.amount0=$$v},expression:\"amount0\"}})],1),_c('div',{staticClass:\"text-right mt-4 ml-4\"},[_c('Ticker',{staticClass:\"btn-mktg\",attrs:{\"asset\":_vm.pool.asset0}})],1)]),_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"amount1\"}},[_vm._v(\" Deposit \"),_c('LabelBalance',{attrs:{\"asset\":_vm.pool.asset1},on:{\"select\":_vm.setAmount1}})],1),_c('InputAmount',{attrs:{\"id\":\"amount1\",\"asset\":_vm.pool.asset1},on:{\"change\":_vm.updateAmount0},model:{value:(_vm.amount1),callback:function ($$v) {_vm.amount1=$$v},expression:\"amount1\"}})],1),_c('div',{staticClass:\"text-right mt-4 ml-4\"},[_c('Ticker',{staticClass:\"btn-mktg\",attrs:{\"asset\":_vm.pool.asset1}})],1)])]:_vm._e(),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn-submit px-6 rounded-2 mb-3\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.pool || !_vm.amount0}},[_vm._v(\" Add liquidity \")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"container-sm px-3\">\n      <PoolNav />\n      <BoxSelectPool :address=\"address\" v-model=\"pool\" />\n      <template v-if=\"pool.asset0\">\n        <Box class=\"d-flex\">\n          <div class=\"flex-auto\">\n            <label for=\"amount0\" class=\"d-block\">\n              Deposit\n              <LabelBalance :asset=\"pool.asset0\" @select=\"setAmount0\" />\n            </label>\n            <InputAmount\n              id=\"amount0\"\n              v-model=\"amount0\"\n              :asset=\"pool.asset0\"\n              @change=\"updateAmount1\"\n            />\n          </div>\n          <div class=\"text-right mt-4 ml-4\">\n            <Ticker class=\"btn-mktg\" :asset=\"pool.asset0\" />\n          </div>\n        </Box>\n        <Box class=\"d-flex\">\n          <div class=\"flex-auto\">\n            <label for=\"amount1\" class=\"d-block\">\n              Deposit\n              <LabelBalance :asset=\"pool.asset1\" @select=\"setAmount1\" />\n            </label>\n            <InputAmount\n              id=\"amount1\"\n              v-model=\"amount1\"\n              :asset=\"pool.asset1\"\n              @change=\"updateAmount0\"\n            />\n          </div>\n          <div class=\"text-right mt-4 ml-4\">\n            <Ticker class=\"btn-mktg\" :asset=\"pool.asset1\" />\n          </div>\n        </Box>\n      </template>\n      <div class=\"text-center\">\n        <button class=\"btn-submit px-6 rounded-2 mb-3\" type=\"submit\" :disabled=\"!pool || !amount0\">\n          Add liquidity\n        </button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport { randomBytes } from 'crypto';\nimport texto from '@/helpers/texto';\nimport { generatePaymentMessage } from '@/helpers/_oswap';\nimport { shorten } from '@/helpers/utils';\n\nexport default {\n  data() {\n    return {\n      pool: false,\n      amount0: '',\n      amount1: '',\n      address: this.$route.params.address\n    };\n  },\n  watch: {\n    async pool(value, oldValue) {\n      if (value !== oldValue) {\n        this.amount0 = '';\n        this.amount1 = '';\n      }\n    }\n  },\n  methods: {\n    setAmount0(amount) {\n      this.amount0 = amount;\n      this.updateAmount1();\n    },\n    setAmount1(amount) {\n      this.amount1 = amount;\n      this.updateAmount0();\n    },\n    updateAmount0() {\n      if (!this.amount1 || !this.pool || !this.pool.hasLiquidity()) return;\n      const k = this.pool.reserve0 / this.pool.reserve1;\n      this.amount0 = (k * this.amount1).toFixed();\n    },\n    updateAmount1() {\n      if (!this.amount0 || !this.pool || !this.pool.hasLiquidity()) return;\n      const k = this.pool.reserve0 / this.pool.reserve1;\n      this.amount1 = (this.amount0 / k).toFixed();\n    },\n    handleSubmit() {\n      const assets = this.$store.state.settings.assets;\n      const address = this.pool.address;\n      const payments = [\n        { address, amount: parseInt(this.amount0), asset: this.pool.asset0 },\n        { address, amount: parseInt(this.amount1), asset: this.pool.asset1 }\n      ];\n      if (this.pool.asset0 !== 'base' && this.pool.asset1 !== 'base')\n        payments.push({ address, amount: 1e4 });\n      const paymentJsonBase64 = generatePaymentMessage({ payments });\n      const asset0Str = assets[this.pool.asset0].symbol || shorten(this.pool.asset0);\n      const asset1Str = assets[this.pool.asset1].symbol || shorten(this.pool.asset1);\n      const pool = `${asset0Str}-${asset1Str}`;\n      const message = `Add liquidity ${pool}\\n[add-liquidity](payment:${paymentJsonBase64})`;\n      const requestId = randomBytes(32).toString('base64');\n      texto.on('pairing', msg => {\n        if (msg.body.pairing_secret === requestId) msg.reply(message);\n      });\n      location.href = `${this.$store.state.auth.invite}#${requestId}`;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mint1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mint1.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mint1.vue?vue&type=template&id=dd5d3c24&\"\nimport script from \"./Mint1.vue?vue&type=script&lang=js&\"\nexport * from \"./Mint1.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}