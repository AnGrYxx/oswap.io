{"version":3,"sources":["webpack:///./src/views/Swap.vue?b3dc","webpack:///./src/helpers/_oswap/route.ts","webpack:///./src/helpers/_oswap/trade.ts","webpack:///./src/helpers/_oswap/factory.ts","webpack:///src/views/Swap.vue","webpack:///./src/views/Swap.vue?348b","webpack:///./src/views/Swap.vue","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","handleSubmit","staticClass","attrs","_v","inputAsset","selectAmount","updateOutputAmount","model","value","callback","$$v","inputAmount","expression","switchAssets","outputAsset","updateInputAmount","outputAmount","$route","name","directives","rawName","domProps","target","composing","to","_e","_s","rate","staticRenderFns","pools","promises","map","pool","init","Promise","all","forEach","hasLiquidity","i","getAmountBought","asset0","asset1","length","getAmountSold","factory","routes","bestRoute","maxAmount","route","minAmount","directPools","getPoolsByPair","directPool","push","toRoute","swap0Pools","swap1Pools","pool0","pool1","addresses","address","pairs","assetA","assetB","order","pair","data","trade","query","watch","methods","updateRate","Infinity","amount","to_aa","location","href","component","$","$map","fails","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","call","0","it","proto","forced","callbackfn","arguments","undefined"],"mappings":"+GAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACE,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBR,EAAIS,aAAaF,MAAW,CAACH,EAAG,MAAM,CAACM,YAAY,qBAAqB,CAACN,EAAG,MAAM,CAACM,YAAY,UAAU,CAACN,EAAG,MAAM,CAACM,YAAY,aAAa,CAACN,EAAG,QAAQ,CAACM,YAAY,UAAUC,MAAM,CAAC,IAAM,UAAU,CAACX,EAAIY,GAAG,WAAWR,EAAG,eAAe,CAACO,MAAM,CAAC,MAAQX,EAAIa,YAAYP,GAAG,CAAC,OAASN,EAAIc,iBAAiB,GAAGV,EAAG,cAAc,CAACO,MAAM,CAAC,GAAK,QAAQ,MAAQX,EAAIa,YAAYP,GAAG,CAAC,OAASN,EAAIe,oBAAoBC,MAAM,CAACC,MAAOjB,EAAe,YAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,YAAYD,GAAKE,WAAW,kBAAkB,GAAGjB,EAAG,MAAM,CAACM,YAAY,0BAA0B,CAACN,EAAG,IAAI,CAACM,YAAY,wBAAwBJ,GAAG,CAAC,MAAQN,EAAIsB,eAAe,CAAClB,EAAG,OAAO,CAACO,MAAM,CAAC,KAAO,aAAa,GAAGP,EAAG,oBAAoB,CAACO,MAAM,CAAC,QAAU,OAAO,IAAMX,EAAIuB,aAAaP,MAAM,CAACC,MAAOjB,EAAc,WAAEkB,SAAS,SAAUC,GAAMnB,EAAIa,WAAWM,GAAKE,WAAW,iBAAiB,KAAKjB,EAAG,MAAM,CAACM,YAAY,UAAU,CAACN,EAAG,MAAM,CAACM,YAAY,aAAa,CAACN,EAAG,QAAQ,CAACM,YAAY,UAAUC,MAAM,CAAC,IAAM,WAAW,CAACX,EAAIY,GAAG,YAAYR,EAAG,cAAc,CAACO,MAAM,CAAC,GAAK,SAAS,MAAQX,EAAIuB,aAAajB,GAAG,CAAC,OAASN,EAAIwB,mBAAmBR,MAAM,CAACC,MAAOjB,EAAgB,aAAEkB,SAAS,SAAUC,GAAMnB,EAAIyB,aAAaN,GAAKE,WAAW,mBAAmB,GAAGjB,EAAG,MAAM,CAACM,YAAY,0BAA0B,CAACN,EAAG,IAAI,CAACM,YAAY,wBAAwBJ,GAAG,CAAC,MAAQN,EAAIsB,eAAe,CAAClB,EAAG,OAAO,CAACO,MAAM,CAAC,KAAO,aAAa,GAAGP,EAAG,oBAAoB,CAACO,MAAM,CAAC,IAAMX,EAAIa,YAAYG,MAAM,CAACC,MAAOjB,EAAe,YAAEkB,SAAS,SAAUC,GAAMnB,EAAIuB,YAAYJ,GAAKE,WAAW,kBAAkB,KAA0B,SAApBrB,EAAI0B,OAAOC,KAAiBvB,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACM,YAAY,UAAUC,MAAM,CAAC,IAAM,OAAO,CAACX,EAAIY,GAAG,uBAAuBR,EAAG,QAAQ,CAACwB,WAAW,CAAC,CAACD,KAAK,QAAQE,QAAQ,UAAUZ,MAAOjB,EAAM,GAAEqB,WAAW,OAAOX,YAAY,yCAAyCC,MAAM,CAAC,GAAK,KAAK,KAAO,OAAO,aAAe,MAAM,YAAc,eAAemB,SAAS,CAAC,MAAS9B,EAAM,IAAGM,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOwB,OAAOC,YAAqBhC,EAAIiC,GAAG1B,EAAOwB,OAAOd,aAAYjB,EAAIkC,KAAMlC,EAAQ,KAAEI,EAAG,MAAM,CAACA,EAAG,IAAI,CAACM,YAAY,8BAA8B,CAACV,EAAIY,GAAG,OAAOR,EAAG,SAAS,CAACO,MAAM,CAAC,MAAQX,EAAIuB,eAAevB,EAAIY,GAAG,MAAMZ,EAAImC,GAAGnC,EAAIoC,MAAM,KAAKhC,EAAG,SAAS,CAACO,MAAM,CAAC,MAAQX,EAAIa,eAAe,GAAGT,EAAG,QAAQ,CAACO,MAAM,CAAC,IAAM,OAAO,CAACX,EAAIY,GAAG,qBAAqBZ,EAAIkC,KAAK9B,EAAG,MAAM,CAACM,YAAY,oBAAoB,CAACN,EAAG,SAAS,CAACM,YAAY,iCAAiCC,MAAM,CAAC,KAAO,SAAS,UAAYX,EAAIa,aAAeb,EAAIuB,cAAgBvB,EAAIoB,cAAgBpB,EAAIyB,eAAe,CAAsB,SAApBzB,EAAI0B,OAAOC,KAAiB,CAAC3B,EAAIY,GAAG,SAAS,CAACZ,EAAIY,GAAG,UAAU,MAAM,MAChtFyB,EAAkB,G,4ICCD,E,WAGnB,WAAYC,GAAa,uBACvBrC,KAAKqC,MAAQA,E,+MAIPC,EAAWtC,KAAKqC,MAAME,KAAI,SAAAC,GAAI,OAAIA,EAAKC,U,SACvCC,QAAQC,IAAIL,G,8IAOlB,OAHAtC,KAAKqC,MAAMO,SAAQ,SAAAJ,GACjB,IAAKA,EAAKK,eAAgB,OAAO,MAE5B,I,sCAGO1B,EAAaP,GAC3B,IAAIkC,EAAI,EACR,MAAO9C,KAAKqC,MAAMS,GAChB3B,EAAcnB,KAAKqC,MAAMS,GAAGC,gBAAgB5B,EAAaP,GACzDA,EACEZ,KAAKqC,MAAMS,GAAGE,SAAWpC,EAAaZ,KAAKqC,MAAMS,GAAGG,OAASjD,KAAKqC,MAAMS,GAAGE,OAC7EF,IAEF,OAAO3B,I,oCAGKK,EAAcF,GAC1B,IAAIwB,EAAI9C,KAAKqC,MAAMa,OAAS,EAC5B,MAAOlD,KAAKqC,MAAMS,GAChBtB,EAAexB,KAAKqC,MAAMS,GAAGK,cAAc3B,EAAcF,GACzDA,EACEtB,KAAKqC,MAAMS,GAAGE,SAAW1B,EAActB,KAAKqC,MAAMS,GAAGG,OAASjD,KAAKqC,MAAMS,GAAGE,OAC9EF,IAEF,OAAOtB,M,iBCpCU,E,WAMnB,WAAY4B,EAASxC,EAAYU,GAAW,uBAFrC,KAAA+B,OAAc,GAGnBrD,KAAKoD,QAAUA,EACfpD,KAAKY,WAAaA,EAClBZ,KAAKsB,YAAcA,E,wDAGZH,GAAW,IACdmC,EADc,OAEdC,EAAY,EAUhB,OARAvD,KAAKqD,OAAOT,SAAQ,SAACY,EAAOV,GAE1B,IAAMtB,EAAegC,EAAMT,gBAAgB5B,EAAa,EAAKP,YACzDY,EAAe+B,IACjBA,EAAY/B,EACZ8B,EAAYE,MAGTF,I,sCAGOnC,GAAW,WACrBoC,EAAY,EAOhB,OALAvD,KAAKqD,OAAOT,SAAQ,SAACY,EAAOV,GAE1B,IAAMtB,EAAegC,EAAMT,gBAAgB5B,EAAa,EAAKP,YACzDY,EAAe+B,IAAWA,EAAY/B,MAErC+B,I,oCAGK/B,GAAY,WACpBiC,EAAY,EAOhB,OALAzD,KAAKqD,OAAOT,SAAQ,SAACY,EAAOV,GAE1B,IAAM3B,EAAcqC,EAAML,cAAc3B,EAAc,EAAKF,eACtDmC,GAActC,EAAcsC,GAAatC,EAAc,KAAIsC,EAAYtC,MAEvEsC,I,mMAIHC,EAAc1D,KAAKoD,QAAQO,eAAe3D,KAAKY,WAAYZ,KAAKsB,aAEpEoC,EAAYd,SAAQ,SAAAgB,GAAU,OAAI,EAAKP,OAAOQ,KAAK,EAAKC,QAAQ,CAACF,QACzC,SAApB5D,KAAKY,YAA8C,SAArBZ,KAAKsB,cAC/ByC,EAAa/D,KAAKoD,QAAQO,eAAe3D,KAAKY,WAAY,QAC1DoD,EAAahE,KAAKoD,QAAQO,eAAe,OAAQ3D,KAAKsB,aAExDyC,GAAcC,GAChBD,EAAWnB,SAAQ,SAAAqB,GACjBD,EAAWpB,SAAQ,SAAAsB,GAEjB,EAAKb,OAAOQ,KAAK,EAAKC,QAAQ,CAACG,EAAOC,YAMxC5B,EAAWtC,KAAKqD,OAAOd,KAAI,SAAAiB,GAAK,OAAIA,EAAMf,U,SAC1CC,QAAQC,IAAIL,G,uIAGZ6B,GAAS,WACT9B,EAAQ8B,EAAU5B,KAAI,SAAA6B,GAC1B,IAAM5B,EAAO,EAAKY,QAAQf,MAAM+B,GAEhC,OAAO,IAAI,OAAKA,EAAS,CAAC5B,EAAKQ,OAAQR,EAAKS,YAE9C,OAAO,IAAI,EAAMZ,O,6BC/EA,E,WAInB,WAAYA,EAAOgC,GAAK,uBACtBrE,KAAKqC,MAAQA,EACbrC,KAAKqE,MAAQA,E,8DAGAC,EAAQC,GACrB,IAAMC,EAAQ,eAAeF,GAAU,eAAeC,GAChDvB,EAASwB,EAAQF,EAASC,EAC1BtB,EAASuB,EAAQD,EAASD,EAC1BG,EAAOzE,KAAKqE,MAAL,UAAcrB,EAAd,YAAwBC,IACrC,OAAOwB,GAAQA,EAAKpC,MAAQoC,EAAKpC,MAAQ,O,KCwD7C,GACEqC,KADF,WAEI,MAAO,CACLC,OAAO,EACP/D,WAAY,GACZU,YAAa,GACbH,YAAa,GACbK,aAAc,GACdQ,GAAIhC,KAAKyB,OAAOmD,MAAM5C,GACtBG,KAAM,IAGV0C,MAAO,CACL,WADJ,oEACA,KADA,oFAEA,MAFA,gCAGA,YAHA,OAIA,0BAJA,2GAOI,YAPJ,oEAOA,KAPA,oFAQA,MARA,gCASA,YATA,OAUA,0BAVA,4GAcEC,QAAS,CACPC,WADJ,WAEM,GAAK/E,KAAKY,YAAeZ,KAAKsB,YAA9B,CADN,IAKA,oCACA,+DACA,iEACA,+BAEQtB,KAAKmC,KADHA,GAAQ,GAAKA,IAAS6C,IACZ,EAGF7C,OAXVnC,KAAKmC,KAAO,GAahBtB,aAhBJ,SAgBA,GACMb,KAAKmB,YAAc8D,EACnBjF,KAAKc,sBAEP,aApBJ,oKAqBA,kBACA,iCACA,mBACA,qBACA,oBAzBA,SA0BA,YA1BA,wGA4BI,KA5BJ,kKA6BA,kCA7BA,wDA8BA,6BACA,yBACA,qDAhCA,SAiCA,kBAjCA,wGAmCIN,aAnCJ,WAoCM,IAAN,KACA,wCACA,qBACUR,KAAKgC,IAA2B,SAArBhC,KAAKyB,OAAOC,OAAiBgD,EAAK1C,GAAKhC,KAAKgC,IACvDwB,EAAMnB,MAAM,KAAIqC,EAAKQ,MAAQ1B,EAAMnB,MAAM,GAAG+B,SAChDe,SAASC,KAAO,OAAtB,OAAsB,CAAtB,uCAEItE,mBA3CJ,WA4CWd,KAAKY,YAAeZ,KAAKsB,cAC1BtB,KAAKmB,cAAanB,KAAKwB,aAAexB,KAAK2E,MAAM5B,gBAAgB/C,KAAKmB,cAAgB,IAC1FnB,KAAK+E,eAEPxD,kBAhDJ,WAiDWvB,KAAKY,YAAeZ,KAAKsB,cAC1BtB,KAAKwB,eAAcxB,KAAKmB,YAAcnB,KAAK2E,MAAMxB,cAAcnD,KAAKwB,eAAiB,IACzFxB,KAAK+E,iBCrJmU,I,YCO1UM,EAAY,eACd,EACAvF,EACAsC,GACA,EACA,KACA,KACA,MAIa,aAAAiD,E,2CCjBf,IAAIC,EAAI,EAAQ,QACZC,EAAO,EAAQ,QAAgChD,IAC/CiD,EAAQ,EAAQ,QAChBC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAEnDE,EAAiBD,IAAwBF,GAAM,WACjD,GAAGjD,IAAIqD,KAAK,CAAE1C,QAAS,EAAG2C,EAAG,IAAK,SAAUC,GAAM,MAAMA,QAM1DR,EAAE,CAAExD,OAAQ,QAASiE,OAAO,EAAMC,QAASN,IAAwBC,GAAkB,CACnFpD,IAAK,SAAa0D,GAChB,OAAOV,EAAKvF,KAAMiG,EAAYC,UAAUhD,OAAS,EAAIgD,UAAU,QAAKC","file":"js/home.69877f4a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"container-sm px-3\"},[_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"input\"}},[_vm._v(\" Input \"),_c('LabelBalance',{attrs:{\"asset\":_vm.inputAsset},on:{\"select\":_vm.selectAmount}})],1),_c('InputAmount',{attrs:{\"id\":\"input\",\"asset\":_vm.inputAsset},on:{\"change\":_vm.updateOutputAmount},model:{value:(_vm.inputAmount),callback:function ($$v) {_vm.inputAmount=$$v},expression:\"inputAmount\"}})],1),_c('div',{staticClass:\"text-right mt-4 d-flex\"},[_c('a',{staticClass:\"ml-2 p-2 color-gray-6\",on:{\"click\":_vm.switchAssets}},[_c('Icon',{attrs:{\"name\":\"switch\"}})],1),_c('ButtonSelectToken',{attrs:{\"default\":\"base\",\"not\":_vm.outputAsset},model:{value:(_vm.inputAsset),callback:function ($$v) {_vm.inputAsset=$$v},expression:\"inputAsset\"}})],1)]),_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"output\"}},[_vm._v(\"Output\")]),_c('InputAmount',{attrs:{\"id\":\"output\",\"asset\":_vm.outputAsset},on:{\"change\":_vm.updateInputAmount},model:{value:(_vm.outputAmount),callback:function ($$v) {_vm.outputAmount=$$v},expression:\"outputAmount\"}})],1),_c('div',{staticClass:\"text-right mt-4 d-flex\"},[_c('a',{staticClass:\"ml-2 p-2 color-gray-6\",on:{\"click\":_vm.switchAssets}},[_c('Icon',{attrs:{\"name\":\"switch\"}})],1),_c('ButtonSelectToken',{attrs:{\"not\":_vm.inputAsset},model:{value:(_vm.outputAsset),callback:function ($$v) {_vm.outputAsset=$$v},expression:\"outputAsset\"}})],1)]),(_vm.$route.name === 'send')?_c('Box',[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"to\"}},[_vm._v(\"Recipient address\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.to),expression:\"to\"}],staticClass:\"form-control input-amount border-0 p-0\",attrs:{\"id\":\"to\",\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"FAB6TH7I...\"},domProps:{\"value\":(_vm.to)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.to=$event.target.value}}})]):_vm._e(),(_vm.rate)?_c('Box',[_c('p',{staticClass:\"text-white float-right m-0\"},[_vm._v(\" 1 \"),_c('Ticker',{attrs:{\"asset\":_vm.outputAsset}}),_vm._v(\" = \"+_vm._s(_vm.rate)+\" \"),_c('Ticker',{attrs:{\"asset\":_vm.inputAsset}})],1),_c('label',{attrs:{\"for\":\"to\"}},[_vm._v(\"Exchange rate\")])]):_vm._e(),_c('div',{staticClass:\"text-center mb-4\"},[_c('button',{staticClass:\"btn-submit px-6 rounded-2 mb-4\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.inputAsset || !_vm.outputAsset || !_vm.inputAmount || !_vm.outputAmount}},[(_vm.$route.name === 'send')?[_vm._v(\"Send\")]:[_vm._v(\"Swap\")]],2)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Pool from './pool';\n\nexport default class Route {\n  public pools: [Pool];\n\n  constructor(pools: [Pool]) {\n    this.pools = pools;\n  }\n\n  async init() {\n    const promises = this.pools.map(pool => pool.init());\n    await Promise.all(promises);\n  }\n\n  hasLiquidity() {\n    this.pools.forEach(pool => {\n      if (!pool.hasLiquidity()) return false;\n    });\n    return true;\n  }\n\n  getAmountBought(inputAmount, inputAsset) {\n    let i = 0;\n    while (this.pools[i]) {\n      inputAmount = this.pools[i].getAmountBought(inputAmount, inputAsset);\n      inputAsset =\n        this.pools[i].asset0 === inputAsset ? this.pools[i].asset1 : this.pools[i].asset0;\n      i++;\n    }\n    return inputAmount;\n  }\n\n  getAmountSold(outputAmount, outputAsset) {\n    let i = this.pools.length - 1;\n    while (this.pools[i]) {\n      outputAmount = this.pools[i].getAmountSold(outputAmount, outputAsset);\n      outputAsset =\n        this.pools[i].asset0 === outputAsset ? this.pools[i].asset1 : this.pools[i].asset0;\n      i--;\n    }\n    return outputAmount;\n  }\n}\n","import Route from './route';\nimport Pool from './pool';\nimport Factory from './factory';\n\nexport default class Trade {\n  public factory: Factory;\n  public inputAsset: string;\n  public outputAsset: string;\n  public routes?: [] = [];\n\n  constructor(factory, inputAsset, outputAsset) {\n    this.factory = factory;\n    this.inputAsset = inputAsset;\n    this.outputAsset = outputAsset;\n  }\n\n  getRoute(inputAmount) {\n    let bestRoute: any;\n    let maxAmount = 0;\n    // @ts-ignore\n    this.routes.forEach((route, i) => {\n      // @ts-ignore\n      const outputAmount = route.getAmountBought(inputAmount, this.inputAsset);\n      if (outputAmount > maxAmount) {\n        maxAmount = outputAmount;\n        bestRoute = route;\n      }\n    });\n    return bestRoute;\n  }\n\n  getAmountBought(inputAmount) {\n    let maxAmount = 0;\n    // @ts-ignore\n    this.routes.forEach((route, i) => {\n      // @ts-ignore\n      const outputAmount = route.getAmountBought(inputAmount, this.inputAsset);\n      if (outputAmount > maxAmount) maxAmount = outputAmount;\n    });\n    return maxAmount;\n  }\n\n  getAmountSold(outputAmount) {\n    let minAmount = 0;\n    // @ts-ignore\n    this.routes.forEach((route, i) => {\n      // @ts-ignore\n      const inputAmount = route.getAmountSold(outputAmount, this.outputAsset);\n      if (!minAmount || (inputAmount < minAmount && inputAmount > 0)) minAmount = inputAmount;\n    });\n    return minAmount;\n  }\n\n  async init() {\n    let directPools = this.factory.getPoolsByPair(this.inputAsset, this.outputAsset);\n    // @ts-ignore\n    directPools.forEach(directPool => this.routes.push(this.toRoute([directPool])));\n    if (this.inputAsset !== 'base' && this.outputAsset !== 'base') {\n      const swap0Pools = this.factory.getPoolsByPair(this.inputAsset, 'base');\n      const swap1Pools = this.factory.getPoolsByPair('base', this.outputAsset);\n      // @ts-ignore\n      if (swap0Pools && swap1Pools) {\n        swap0Pools.forEach(pool0 => {\n          swap1Pools.forEach(pool1 => {\n            // @ts-ignore\n            this.routes.push(this.toRoute([pool0, pool1]));\n          });\n        });\n      }\n    }\n    // @ts-ignore\n    const promises = this.routes.map(route => route.init());\n    await Promise.all(promises);\n  }\n\n  toRoute(addresses): Route {\n    const pools = addresses.map(address => {\n      const pool = this.factory.pools[address];\n      // @ts-ignore\n      return new Pool(address, [pool.asset0, pool.asset1]);\n    });\n    return new Route(pools);\n  }\n}\n","import { numberFromSeed } from './';\n\nexport default class Factory {\n  public pools: [];\n  public pairs: [];\n\n  constructor(pools, pairs) {\n    this.pools = pools;\n    this.pairs = pairs;\n  }\n\n  getPoolsByPair(assetA, assetB) {\n    const order = numberFromSeed(assetA) > numberFromSeed(assetB);\n    const asset0 = order ? assetA : assetB;\n    const asset1 = order ? assetB : assetA;\n    const pair = this.pairs[`${asset0}_${asset1}`];\n    return pair && pair.pools ? pair.pools : [];\n  }\n}\n","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"container-sm px-3\">\n      <Box class=\"d-flex\">\n        <div class=\"flex-auto\">\n          <label for=\"input\" class=\"d-block\">\n            Input\n            <LabelBalance :asset=\"inputAsset\" @select=\"selectAmount\" />\n          </label>\n          <InputAmount\n            id=\"input\"\n            v-model=\"inputAmount\"\n            @change=\"updateOutputAmount\"\n            :asset=\"inputAsset\"\n          />\n        </div>\n        <div class=\"text-right mt-4 d-flex\">\n          <a class=\"ml-2 p-2 color-gray-6\" @click=\"switchAssets\"><Icon name=\"switch\"/></a>\n          <ButtonSelectToken default=\"base\" :not=\"outputAsset\" v-model=\"inputAsset\" />\n        </div>\n      </Box>\n      <Box class=\"d-flex\">\n        <div class=\"flex-auto\">\n          <label for=\"output\" class=\"d-block\">Output</label>\n          <InputAmount\n            id=\"output\"\n            v-model=\"outputAmount\"\n            @change=\"updateInputAmount\"\n            :asset=\"outputAsset\"\n          />\n        </div>\n        <div class=\"text-right mt-4 d-flex\">\n          <a class=\"ml-2 p-2 color-gray-6\" @click=\"switchAssets\"><Icon name=\"switch\"/></a>\n          <ButtonSelectToken :not=\"inputAsset\" v-model=\"outputAsset\" />\n        </div>\n      </Box>\n      <Box v-if=\"$route.name === 'send'\">\n        <label for=\"to\" class=\"d-block\">Recipient address</label>\n        <input\n          id=\"to\"\n          type=\"text\"\n          autocomplete=\"off\"\n          class=\"form-control input-amount border-0 p-0\"\n          placeholder=\"FAB6TH7I...\"\n          v-model=\"to\"\n        />\n      </Box>\n      <Box v-if=\"rate\">\n        <p class=\"text-white float-right m-0\">\n          1 <Ticker :asset=\"outputAsset\" /> = {{ rate }} <Ticker :asset=\"inputAsset\" />\n        </p>\n        <label for=\"to\">Exchange rate</label>\n      </Box>\n      <div class=\"text-center mb-4\">\n        <button\n          class=\"btn-submit px-6 rounded-2 mb-4\"\n          type=\"submit\"\n          :disabled=\"!inputAsset || !outputAsset || !inputAmount || !outputAmount\"\n        >\n          <template v-if=\"$route.name === 'send'\">Send</template>\n          <template v-else>Swap</template>\n        </button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport Trade from '@/helpers/_oswap/trade';\nimport Factory from '@/helpers/_oswap/factory';\nimport { generateUri, toString } from '@/helpers/_oswap';\n\nexport default {\n  data() {\n    return {\n      trade: false,\n      inputAsset: '',\n      outputAsset: '',\n      inputAmount: '',\n      outputAmount: '',\n      to: this.$route.query.to,\n      rate: 0\n    };\n  },\n  watch: {\n    async inputAsset(value, oldValue) {\n      if (value !== oldValue) {\n        await this.init();\n        this.updateOutputAmount();\n      }\n    },\n    async outputAsset(value, oldValue) {\n      if (value !== oldValue) {\n        await this.init();\n        this.updateOutputAmount();\n      }\n    }\n  },\n  methods: {\n    updateRate() {\n      if (!this.inputAsset || !this.outputAsset) {\n        this.rate = 0;\n        return;\n      }\n      const { assets } = this.$store.state.settings;\n      const inputAmount = toString(this.inputAmount, assets[this.inputAsset].decimals);\n      const outputAmount = toString(this.outputAmount, assets[this.outputAsset].decimals);\n      const rate = parseFloat((inputAmount / outputAmount).toFixed(6));\n      if (rate <= 0 || rate === Infinity) {\n        this.rate = 0;\n        return;\n      }\n      this.rate = rate;\n    },\n    selectAmount(amount) {\n      this.inputAmount = amount;\n      this.updateOutputAmount();\n    },\n    async switchAssets() {\n      const inputAsset = this.inputAsset;\n      this.inputAsset = this.outputAsset;\n      this.outputAsset = inputAsset;\n      this.outputAmount = '';\n      this.inputAmount = '';\n      await this.init();\n    },\n    async init() {\n      if (!this.inputAsset || !this.outputAsset) return;\n      const settings = this.$store.state.settings;\n      const factory = new Factory(settings.pools, settings.pairs);\n      this.trade = new Trade(factory, this.inputAsset, this.outputAsset);\n      await this.trade.init();\n    },\n    handleSubmit() {\n      const data = {};\n      const route = this.trade.getRoute(this.inputAmount);\n      const address = route.pools[0].address;\n      if (this.to && this.$route.name === 'send') data.to = this.to;\n      if (route.pools[1]) data.to_aa = route.pools[1].address;\n      location.href = generateUri(address, data, this.inputAmount, this.inputAsset);\n    },\n    updateOutputAmount() {\n      if (!this.inputAsset || !this.outputAsset) return;\n      if (this.inputAmount) this.outputAmount = this.trade.getAmountBought(this.inputAmount) || '';\n      this.updateRate();\n    },\n    updateInputAmount() {\n      if (!this.inputAsset || !this.outputAsset) return;\n      if (this.outputAmount) this.inputAmount = this.trade.getAmountSold(this.outputAmount) || '';\n      this.updateRate();\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Swap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Swap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Swap.vue?vue&type=template&id=2d62fef6&\"\nimport script from \"./Swap.vue?vue&type=script&lang=js&\"\nexport * from \"./Swap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar fails = require('../internals/fails');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = HAS_SPECIES_SUPPORT && !fails(function () {\n  [].map.call({ length: -1, 0: 1 }, function (it) { throw it; });\n});\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}