{"version":3,"sources":["webpack:///./src/views/AddLiquidity2.vue?a589","webpack:///src/views/AddLiquidity2.vue","webpack:///./src/views/AddLiquidity2.vue?a683","webpack:///./src/views/AddLiquidity2.vue","webpack:///./src/helpers/_oswap/pair.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","handleSubmit","staticClass","attrs","_v","model","value","callback","$$v","id","expression","pair","reserve0","asset0","reserve1","asset1","_e","share","_s","asset","setAmount","amount","staticRenderFns","data","watch","methods","location","href","component","Pair","address","assets","ready","info","parseInt","supply","inputAmount","inputAsset","inputReserve","outputReserve","outputAmount","outputAsset"],"mappings":"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","file":"js/add-liquidity-2.1827896c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"container-sm px-3\"},[_c('PoolNav',{attrs:{\"default\":1}}),_c('Box',[_c('label',{staticClass:\"d-block\"},[_vm._v(\"Pool\")]),_c('ButtonSelectPair',{attrs:{\"customClass\":\"h2 d-block\"},model:{value:(_vm.id),callback:function ($$v) {_vm.id=$$v},expression:\"id\"}}),(_vm.pair)?_c('div',[_c('label',{staticClass:\"d-block\"},[_vm._v(\"Current pool size\")]),_c('a',{attrs:{\"href\":(\"https://testnetexplorer.obyte.org/#\" + (_vm.pair.address)),\"target\":\"_blank\"}},[_c('Amount',{attrs:{\"value\":_vm.pair.reserve0,\"asset\":_vm.pair.asset0}}),_vm._v(\" \"),_c('Ticker',{attrs:{\"asset\":_vm.pair.asset0}}),_vm._v(\" + \"),_c('Amount',{attrs:{\"value\":_vm.pair.reserve1,\"asset\":_vm.pair.asset1}}),_vm._v(\" \"),_c('Ticker',{attrs:{\"asset\":_vm.pair.asset1}}),_c('Icon',{staticClass:\"ml-1\",attrs:{\"name\":\"external-link\",\"size\":\"18\"}})],1)]):_vm._e(),(_vm.share)?_c('div',[_c('label',{staticClass:\"d-block\"},[_vm._v(\"Your pool share\")]),_c('span',{staticClass:\"text-white\"},[(_vm.share > 1)?_c('Pie',{staticClass:\"mr-2\",attrs:{\"percent\":_vm.share}}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.share)+\"% \")],1)]):_vm._e()],1),(_vm.pair.asset0 && _vm.pair.reserve0 && _vm.pair.reserve1)?_c('Box',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-auto\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"amount\"}},[_vm._v(\" Deposit \"),_c('LabelBalance',{attrs:{\"asset\":_vm.asset},on:{\"select\":_vm.setAmount}})],1),_c('InputAmount',{attrs:{\"id\":\"amount\",\"asset\":_vm.asset},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}})],1),_c('div',{staticClass:\"text-right mt-4 ml-4\"},[_c('ButtonSelectToken',{attrs:{\"default\":_vm.pair.asset0,\"values\":[_vm.pair.asset0, _vm.pair.asset1]},model:{value:(_vm.asset),callback:function ($$v) {_vm.asset=$$v},expression:\"asset\"}})],1)]):_vm._e(),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn-submit px-6 rounded-2 mb-3\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.asset || !_vm.amount}},[_vm._v(\" Add liquidity \")])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"container-sm px-3\">\n      <PoolNav :default=\"1\" />\n      <Box>\n        <label class=\"d-block\">Pool</label>\n        <ButtonSelectPair customClass=\"h2 d-block\" v-model=\"id\" />\n        <div v-if=\"pair\">\n          <label class=\"d-block\">Current pool size</label>\n          <a :href=\"`https://testnetexplorer.obyte.org/#${pair.address}`\" target=\"_blank\">\n            <Amount :value=\"pair.reserve0\" :asset=\"pair.asset0\" /> <Ticker :asset=\"pair.asset0\" /> +\n            <Amount :value=\"pair.reserve1\" :asset=\"pair.asset1\" /> <Ticker :asset=\"pair.asset1\" />\n            <Icon name=\"external-link\" class=\"ml-1\" size=\"18\" />\n          </a>\n        </div>\n        <div v-if=\"share\">\n          <label class=\"d-block\">Your pool share</label>\n          <span class=\"text-white\">\n            <Pie v-if=\"share > 1\" class=\"mr-2\" :percent=\"share\" />\n            {{ share }}%\n          </span>\n        </div>\n      </Box>\n      <Box v-if=\"pair.asset0 && pair.reserve0 && pair.reserve1\" class=\"d-flex\">\n        <div class=\"flex-auto\">\n          <label for=\"amount\" class=\"d-block\">\n            Deposit\n            <LabelBalance :asset=\"asset\" @select=\"setAmount\" />\n          </label>\n          <InputAmount id=\"amount\" v-model=\"amount\" :asset=\"asset\" />\n        </div>\n        <div class=\"text-right mt-4 ml-4\">\n          <ButtonSelectToken\n            :default=\"pair.asset0\"\n            :values=\"[pair.asset0, pair.asset1]\"\n            v-model=\"asset\"\n          />\n        </div>\n      </Box>\n      <div class=\"text-center\">\n        <button class=\"btn-submit px-6 rounded-2 mb-3\" type=\"submit\" :disabled=\"!asset || !amount\">\n          Add liquidity\n        </button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport Pair from '@/helpers/_oswap/pair';\nimport { generateUri, getBalance } from '@/helpers/_oswap';\n\nexport default {\n  data() {\n    return {\n      id: false,\n      pair: false,\n      asset: '',\n      amount: '',\n      share: 0\n    };\n  },\n  watch: {\n    async id(value, oldValue) {\n      if (value !== oldValue) {\n        this.amount = '';\n        const address = this.$store.state.settings.allPairs[value];\n        const pair = new Pair(address, value.split('_'));\n        await pair.init();\n        const balance = getBalance(this.$store.state.auth.balances, pair.asset);\n        this.share = parseFloat(((100 / pair.supply) * balance).toFixed(3));\n        this.pair = pair;\n      }\n    }\n  },\n  methods: {\n    setAmount(amount) {\n      this.amount = amount;\n    },\n    handleSubmit() {\n      const data = { mint: '1' };\n      const address = this.pair.address;\n      location.href = generateUri(address, data, this.amount, this.asset);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLiquidity2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLiquidity2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddLiquidity2.vue?vue&type=template&id=4c8396da&\"\nimport script from \"./AddLiquidity2.vue?vue&type=script&lang=js&\"\nexport * from \"./AddLiquidity2.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { getInfo, getAmountBought, getAmountSold } from './';\n\nexport default class Pair {\n  public ready: boolean = false;\n  public address: string;\n  public asset0: string;\n  public asset1: string;\n  public asset?: string;\n  public reserve0?: number;\n  public reserve1?: number;\n  public supply?: number;\n\n  constructor(address, assets) {\n    this.asset0 = assets[0];\n    this.asset1 = assets[1];\n    this.address = address;\n  }\n\n  async init() {\n    const info = await getInfo(this.address);\n    this.asset = info.asset;\n    this.reserve0 = parseInt(info.reserve0);\n    this.reserve1 = parseInt(info.reserve1);\n    this.supply = parseInt(info.supply);\n    this.ready = true;\n  }\n\n  hasLiquidity() {\n    return !(!this.reserve0 || !this.reserve1 || !this.supply);\n  }\n\n  getAmountBought(inputAmount, inputAsset) {\n    const inputReserve = inputAsset === this.asset0 ? this.reserve0 : this.reserve1;\n    const outputReserve = inputAsset === this.asset1 ? this.reserve0 : this.reserve1;\n    return getAmountBought(inputAmount, inputReserve, outputReserve);\n  }\n\n  getAmountSold(outputAmount, outputAsset) {\n    const inputReserve = outputAsset === this.asset1 ? this.reserve0 : this.reserve1;\n    const outputReserve = outputAsset === this.asset0 ? this.reserve0 : this.reserve1;\n    return getAmountSold(outputAmount, outputReserve, inputReserve);\n  }\n}\n"],"sourceRoot":""}